<!DOCTYPE html>
<html>
<body>

<h1>heading</h1>

<p>paragraph</p>


<!-- The core Firebase JS SDK is always required and must be listed first -->
<script src="https://www.gstatic.com/firebasejs/7.9.1/firebase-app.js"></script>

<!-- TODO: Add SDKs for Firebase products that you want to use
     https://firebase.google.com/docs/web/setup#available-libraries -->
<script src="https://www.gstatic.com/firebasejs/7.9.1/firebase-database.js"></script>

<script>
  // Your web app's Firebase configuration
  var firebaseConfig = {
    apiKey: "AIzaSyA3pJzomx74Ta9WsGKbQEjnCLV6QQvky_w",
    authDomain: "cc2020-music.firebaseapp.com",
    databaseURL: "https://cc2020-music.firebaseio.com",
    projectId: "cc2020-music",
    storageBucket: "cc2020-music.appspot.com",
    messagingSenderId: "44903163873",
    appId: "1:44903163873:web:bd6742325538fb269094a0"
  };
  // Initialize Firebase
  firebase.initializeApp(firebaseConfig);

  // Get a reference to the database service
  var database = firebase.database();

  function addSong(songTitle, artistName) {
      // A post entry
      var postData = {
          songTitle: songTitle,
          artistName: artistName
      };

      // Get a key for a new Post
      var newPostKey = firebase.database().ref().child('songReqs').push().key;

      // Write the new post's data simultaneously in the posts list and the user's post list.
      var updates = {};
      updates['/songReqs/' + newPostKey] = postData;

      return firebase.database().ref().update(updates);
  }

  function makeRoom(host) {
      
      var roomKey = '';
      var characters = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ';
      var charactersLength = characters.length;
      for (var i = 0; i < 4; i++) {
        roomKey += characters.charAt(Math.floor(Math.random() * charactersLength));
      }
      
      var postData = {
          queue: {},
          host: host,
          roomKey: roomKey
      }

      var newPostKey = firebase.database().ref().child('rooms').push().key;
      var updates = {};
      updates['/rooms/' + newPostKey] = postData;

      firebase.database().ref().update(updates);

      return '/rooms/' + newPostKey;
  }

  var room = makeRoom("Caleb");

  var songRef = firebase.database().ref('songReqs');
  var songDisplayName;
  var songDisplayArtist;
  songRef.on('value', function(snapshot) {
    var sn = snapshot.val();
    snapshot.forEach(function(childSnapshot) {
        var childKey = childSnapshot.key;
        var childData = childSnapshot.val();
        songDisplayName = childData['songTitle'];
        songDisplayArtist = childData['artistName'];
        document.write(songDisplayName + ' by ' + songDisplayArtist);
    })
  });

  firebase.database().ref(room).remove();


</script>
</body>
</html>